(()=>{var e=document.createElement("script");e.src=chrome.runtime.getURL("facebookPage.js"),e.onload=function(){this.remove()},(document.head||document.documentElement).appendChild(e);const t="CREATE:CREATE_LISTING_FACEBOOK",o="RETURN:DELIST_LISTING_FACEBOOK",n="RETURN:GET_FACEBOOK_LISTING",r="RETURN:GET_FACEBOOK_LISTINGS",s="RETURN:GET_FACEBOOK_CATEGORIES",i="RETURN:GET_FACEBOOK_SHIPPING_OPTIONS";function c(e,t,o=(()=>{})){if(!e||!e.data)return;const{source:n,payload:r}=e.data;n&&null!=t&&n===t&&o(r)}function a(e,t={},o=5e5,n=0,r=(()=>{})){return e=`${e}_EXTENSION`,console.log(`facebook.js messageScript: ${e} ${JSON.stringify(t)}`),window.startedFlypFBListing=!1,window.startedFlypFBDelisting=!1,window.startedFlypFBGetListings=!1,window.startedFlypFBGetListing=!1,n&&(o+=n),new Promise(((s,i)=>{setTimeout((()=>{((e,t={})=>{t.message=e,console.log(`facebook.js postMessageScript: ${JSON.stringify(t)}`),window.postMessage({source:"contentScriptEvent",payload:t},"*")})(e,t)}),n);const a=setTimeout((()=>{i(new Error(`Failed to receive response from extension after ${o} msecs`))}),o);window.addEventListener("message",(t=>c(t,e,(e=>{console.log(`facebook.js handleMessageFromExtension: ${JSON.stringify(e)}`),e&&"success"===e.type?(clearTimeout(a),r(e),s(e)):e&&"failed"===e.type?(clearTimeout(a),r(e),i(e)):(clearTimeout(a),r(e),i({errorMessage:"An error occurred"})),window.removeEventListener("message",c,!0)}))),!0)}))}chrome.runtime.onMessage.addListener((function(e,c,d){const{message:E,payload:l}=e;if(console.log(`facebook.js: ${JSON.stringify(e)}`),E===t){try{a(t,l,5e5,1e3,(e=>{d(e)}))}catch(e){}return!0}if(E===s){try{a(s,l,6e4,1e3,(e=>{d(e)}))}catch(e){}return!0}if(E===i){try{a(i,l,6e4,1e3,(e=>{d(e)}))}catch(e){}return!0}if(E===o){try{a(o,l,5e5,1e3,(e=>{d(e)}))}catch(e){}return!0}if(E===r){try{a(r,l,5e5,1e3,(e=>{d(e)}))}catch(e){}return!0}if(E===n){try{a(n,l,5e5,1e3,(e=>{d(e)}))}catch(e){}return!0}}))})();
//# sourceMappingURL=facebook.js.map