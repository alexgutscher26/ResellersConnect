import{fireEvent}from"@testing-library/react";export const overlayPage=(n="Flyp crosslisting in progress...")=>{appendStyleToHead(),appendScriptToHead();const e=document.createElement("div"),t=document.createElement("h3");t.className="flyp-text-loading",e.className="flyp-stuck-manual",e.id="flyp-stuck-manual-id",t.innerHTML=n,e.innerHTML='<div onclick="stuckOnclick()">Stuck? Continue with manual listing</div>';const i=document.createElement("div");i.id="flyp-loading",i.className="flyp-overlay",i.appendChild(t),i.appendChild(e),document.querySelector("body").appendChild(i)};export const appendStyleToHead=()=>{const n=document.getElementsByTagName("head")[0],e=document.createElement("style");e.innerHTML='\n      .flyp-spinner {\n        display: inline-block;\n        width: 50px;\n        height: 50px;\n        border-radius: 50%;\n        position: relative;\n        border-top: 8px solid #ffe4e3;\n        border-right: 8px solid #ffe4e3;\n        border-bottom: 8px solid #ffe4e3;\n        border-left: 8px solid #f7507c;\n        transform: translateZ(0);\n        animation: flyp-rotate 750ms infinite linear;\n        vertical-align: middle;\n        box-sizing: border-box;\n      }\n\n      .flyp-dots {\n        width: 150px;\n        height: 40px;\n        border-radius: 40px;\n        background-color: #f4f4f4;\n        background-size: cover;\n        box-shadow: 0px 4px 8px rgba(244,244,244,1);\n        margin: 0 auto;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .flyp-dots-dot {\n        animation: flyp-blink 1s infinite both;\n        border-radius: 50%;\n        width: 10px;\n        height: 10px;\n        background-color: #5c5c5c;\n        margin-left: 5px;\n      }\n\n      .flyp-dots-dot:nth-child(1) {\n        margin-left: 0;\n      }\n\n      .flyp-dots-dot:nth-child(2) {\n        animation-delay: .2s;\n      }\n\n      .flyp-dots-dot:nth-child(3) {\n        animation-delay: .4s;\n      }\n\n      @keyframes flyp-blink {\n        0% {\n          opacity: .2;\n        }\n        20% {\n          opacity: 1;\n        }\n        100% {\n          opacity: .2;\n        }\n      }\n\n      @keyframes flyp-rotate {\n        0% {\n            transform: rotate(0deg);\n        }\n        100% {\n          transform: rotate(360deg);\n        }\n      }\n\n      .flyp-imported {\n        display: flex;\n        width: 40px;\n        height: 40px;\n        border-radius: 50%;\n        position: relative;\n        border: 2px solid #f7507c;\n        transform: translateZ(0);\n        vertical-align: middle;\n        align-items: center;\n        justify-content: center;\n        margin: 0 auto;\n      }\n\n      .flyp-imported:after {\n        content: "";\n        display: inline-block;\n        transform: rotate(45deg);\n        height: 18px;\n        width: 7px;\n        border-bottom: 2px solid #f7507c;\n        border-right: 2px solid #f7507c;\n      }\n\n      .flyp-imported .tooltip-text {\n        bottom: 100%;\n        lef: 50%;\n        visibility: hidden;\n        width: 120px;\n        background-color: black;\n        color: #fff;\n        text-align: center;\n        padding: 5px 0;\n        border-radius: 6px;\n        position: absolute;\n        font-size: 10px;\n        line-height: normal;\n        z-index: 1;\n      }\n\n      .flyp-imported:hover .tooltip-text {\n        visibility: visible;\n      }\n\n      .flyp-imported-row {\n        line-height: 30px;\n        margin: 0;\n      }\n\n      .flyp-text {\n        line-height: 30px;\n        font-size: 12px;\n        color: #f5517c;\n        text-decoration: none solid rgb(245, 81, 124);\n        letter-spacing: 0.4px;\n        text-transform: uppercase;\n        text-align: center;\n        margin: 5px auto;\n        font-weight: bold;\n      }\n\n      .flyp-text-button {\n        width: 200px;\n        font-size: 12px;\n        color: #8c8c8c;\n        text-decoration: none solid rgb(140, 140, 140);\n        letter-spacing: 1px;\n        text-transform: uppercase;\n        text-align: center;\n        margin: 5px auto;\n        font-weight: bold;\n      }\n\n      .flyp-button {\n        background: #f7507c;\n        color: #fff;\n        border-radius: 40px;\n        padding: 5px 10px;\n        font-size: 16px;\n        border: none;\n        cursor: pointer;\n        box-shadow: 0px 4px 8px rgba(247,80,124,0.35);\n        width: 149px;\n        height: 40px;\n      }\n\n      .flyp-button--return {\n        right: 0;\n        position: absolute;\n        background: none;\n        border: 1px solid #f7507c;\n        color: #f7507c;\n        width: 187px;\n        box-shadow: none;\n      }\n\n      .flyp-bar {\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        width: 100%;\n        height: 75px;\n        background-color: #f4f4f4;\n        color: #252525;\n        font-size: 16px;\n        font-weight: bold;\n        z-index: 1000;\n      }\n\n      .flyp-wrapper {\n        max-width: 1200px;\n        margin: 0 auto;\n        display: flex;\n        align-items: center;\n        height: inherit;\n        position: relative;\n      }\n\n      .flyp-date {\n        font-size: 12px;\n        font-weight: normal;\n        display:block;\n        margin-top: 5px\n      }\n\n      h3.flyp-text-loading {\n        position: absolute;\n        color: white;\n        font-size: 40px;\n        top: 0;\n        bottom: 0;\n        height: 40px;\n        margin: auto;\n        max-width: 90%;\n        text-align: center;\n      }\n\n      h3.flyp-text-loading--error {\n        color: #ff0100;\n        font-weight: bold;\n      }\n\n      .flyp-overlay {\n        background-color: rgba(0,0,0, .3);\n        left: 0;\n        top: 0;\n        position: fixed;\n        width: 100%;\n        height: 100%;\n        z-index: 10000;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n   .flyp-stuck-manual {\n        color: #ffffff;\n  \n  \n  display: none; \n  \n   font-size: 17px; \n  \n  margin-top: 100px;  \n \n  text-decoration: underline; \n  \n  cursor: pointer;\n      }\n\n      .flyp-overlay {\n        background-color: rgba(0,0,0, .3);\n        left: 0;\n        top: 0;\n        position: fixed;\n        width: 100%;\n        height: 100%;\n        z-index: 10000;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n   ',n.appendChild(e)};export const appendScriptToHead=()=>{const n=document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript",e.text='\n    setTimeout(() => {document.getElementById("flyp-stuck-manual-id").style.display = \'block\'}, 45000);\n    function stuckOnclick() {\n        document.getElementById("flyp-stuck-manual-id").onclick = () => {\n            document.getElementById("flyp-loading").style.display = \'none\';\n        }\n    }',n.appendChild(e)};export const uploadImages=async(n,e)=>{if(!e)throw new Error(`Cannot find input file to upload images! Page: ${document.location.href}`);const t=[];n.forEach(((n,e)=>{t.push(new File([n],`img-${e}`))})),fireEvent.change(e,{target:{files:t}}),await sleep(3e3)};export const fireChange=async(n,e)=>{fireEvent.change(n,{target:{value:e}}),await sleep(1e3)};export const fireKeyDown=async(n,e,t)=>{fireEvent.keyDown(n,{key:e,keyCode:t}),await sleep(1e3)};export const fireClick=async n=>{fireEvent.click(n),await sleep(1e3)};export const fireFocus=async n=>{fireEvent.focus(n)};export const getDomXpath=n=>document.evaluate(n,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;export const sleep=async n=>new Promise((e=>setTimeout(e,n)));export const getCategory=n=>{const e=n.toLowerCase();return e.includes("tool")?"Tools":e.includes("art")||e.includes("craft")?"Arts & crafts":e.includes("baby")||e.includes("kid")||e.includes("boy")||e.includes("girl")?"Baby & children":e.includes("women")&&(e.includes("cloth")||e.includes("shoe")||e.includes("lingerie")||e.includes("sleepwear"))?"Women's clothing & shoes":e.includes("men")&&(e.includes("cloth")||e.includes("shoe")||e.includes("lingerie")||e.includes("sleepwear"))?"Men's clothing & shoes":e.includes("lingerie")||e.includes("sleepwear")?"Women's clothing & shoes":e.includes("jewelry")||e.includes("accessories")||e.includes("watch")?"Jewellery & accessories":e.includes("antique")||e.includes("collectible")?"Antiques & collectibles":e.includes("book")||e.includes("movie")||e.includes("music")?"Books, Movies & Music":e.includes("video game")?"Video Games":e.includes("toy")||e.includes("game")?"Toys & Games":e.includes("furniture")?"Furniture":e.includes("household")?"Household":e.includes("garden")?"Garden":e.includes("appliances")?"Appliances":e.includes("bag")||e.includes("luggage")?"Bags & luggage":e.includes("health")||e.includes("beauty")||e.includes("makeup")||e.includes("skincare")?"Health & beauty":e.includes("pet")?"Pet supplies":e.includes("electronic")||e.includes("computer")?"Electronics & computers":e.includes("mobile")||e.includes("phone")?"Mobile Phones":e.includes("bicycle")?"Bicycles":e.includes("sport")||e.includes("outdoor")?"Sport & outdoors":e.includes("musical")||e.includes("instrument")?"Musical Instruments":e.includes("miscellaneous")?"Miscellaneous":n};export const getConditionAlias=n=>{switch(n.toLowerCase()){case"used - like new":return"Used – like new";case"used - good":return"Used – good";case"used - fair":return"Used – fair";default:return n}};export const getConditionAlias2=n=>{switch(n.toLowerCase()){case"used - like new":return"Used – Like New";case"used - good":return"Used – Good";case"used - fair":return"Used – Fair";default:return n}};export const checkResponseHeader=async n=>{const e=n.headers.get("content-type");if(!e||-1===e.indexOf("application/json")){const e=await n.text();throw Error(e)}};export const validateMercariJsonResponse=async(n,e)=>{const t=n?.headers.get("Content-Type");if(!t||!t.includes("application/json")){const t=await(n?.text());throw new Error(`Unexpected Mercari error occurred: ${e} - ${t}`)}};