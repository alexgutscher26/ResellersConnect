import{handleConnectionIssue}from"./errorMessages";import ErrorUtil from"../utils/ErrorUtil";export const getUserMercariDetails=(e,r=(()=>{}))=>{fetch("https://www.mercari.com/v1/initialize").then((async s=>{if(s.url&&!s.url.includes("www.mercari.com/v1/initialize"))return r({type:"failed",errorMessage:handleConnectionIssue("mercari.com")}),!0;const t=await s.json();return r({type:"success",message:e,id:t.user.userId,email:t.user.email,username:t.user.name}),!0})).catch((e=>{r({type:"failed",errorMessage:handleConnectionIssue("mercari.com")}),ErrorUtil.capture(e)}))};export const getMercariInfo=e=>{let r=/\{.*\:\{.*\:.*\}\}/.exec(e);if(!r||r&&0===r.length)throw new Error("extractNextData script missing");return JSON.parse(`${r[0]}}`)};export const getMercariUserInfo=e=>{const r=getMercariInfo(e)||{};let s="",t="",i="",o="";if(r.props&&r.props.pageProps&&r.props.pageProps.req){const e=r.props.pageProps.req.user;s=e.email,t=e.name,i=e.userId,o=e.uuid}return{email:s,username:t,id:i,uid:o}};